# ML Model Integration Guide

## –û–±–∑–æ—Ä

–í RADAR —Å–∏—Å—Ç–µ–º—É –±—ã–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ ML-–º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ hot score –Ω–æ–≤–æ—Å—Ç–µ–π. –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

- **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π hotness score** (70% –≤–µ—Å–∞) - –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **ML-–º–æ–¥–µ–ª—å hot score** (30% –≤–µ—Å–∞) - –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score** - –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞ –¥–≤—É—Ö –ø–æ–¥—Ö–æ–¥–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **ML Scorer Service** (`src/services/ml_scorer.py`)
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—É—á–µ–Ω–Ω–æ–π ML-–º–æ–¥–µ–ª—å—é
   - Fallback scoring –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

2. **–ù–æ–≤—ã–π —É–∑–µ–ª –≤ –∞–≥–µ–Ω—Ç–µ** (`src/agents/nodes.py`)
   - `calculate_ml_hotness_node()` - —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç ML scores –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `rank_and_select_node()` - –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –∏ ML scores

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞** (`src/agents/graphs.py`)
   - –î–æ–±–∞–≤–ª–µ–Ω —É–∑–µ–ª ML-—Å–∫–æ—Ä–∏–Ω–≥–∞ –≤ –ø–∞–π–ø–ª–∞–π–Ω

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Docker

### –ü—É—Ç–∏ –∫ –º–æ–¥–µ–ª—è–º

ML-–º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç—Å—è –ø–æ –ø—É—Ç–∏:
```
/app/ml/hot_news_model/models/lenta_model.joblib
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è ML-–º–æ–¥–µ–ª–∏ - –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ —Å ML-–º–æ–¥–µ–ª—å—é

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
python run_analysis_with_ml.py --time-window 24 --top-k 5 --verbose

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–∞–π–ª
python run_analysis_with_ml.py --time-window 48 --top-k 10 --output results.json

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
python test_ml_integration.py
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üì∞ TOP NEWS ANALYSIS RESULTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. –≠–∫–æ–Ω–æ–º–∏–∫–∞ –†–æ—Å—Å–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–æ—Å—Ç –Ω–∞ 3%
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Traditional Hotness: 0.723
ML Hotness: 0.654
Combined Hotness: 0.703
Why Now: –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ä–æ—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–Ω–¥–µ–º–∏–∏

Telegram Post:
  ‚ö°Ô∏è–≠–∫–æ–Ω–æ–º–∏–∫–∞ –†–æ—Å—Å–∏–∏ —Ä–∞—Å—Ç–µ—Ç –Ω–∞ 3%!
  –í–æ –≤—Ç–æ—Ä–æ–º –∫–≤–∞—Ä—Ç–∞–ª–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω —Ä–æ—Å—Ç –í–í–ü –Ω–∞ 3,2%
  –≠—Ç–æ –≤—ã—à–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞...
  ...

2. –ö—Ä–∏–∑–∏—Å –≤ –±–∞–Ω–∫–æ–≤—Å–∫–æ–º —Å–µ–∫—Ç–æ—Ä–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Traditional Hotness: 0.612
ML Hotness: 0.589
Combined Hotness: 0.605
Why Now: –°–∏—Ç—É–∞—Ü–∏—è —É—Ö—É–¥—à–∞–µ—Ç—Å—è, —Ç—Ä–µ–±—É—é—Ç—Å—è —Å—Ä–æ—á–Ω—ã–µ –º–µ—Ä—ã

Telegram Post:
  üö®–ö—Ä–∏–∑–∏—Å –≤ –±–∞–Ω–∫–∞—Ö –Ω–∞–±–∏—Ä–∞–µ—Ç –æ–±–æ—Ä–æ—Ç—ã
  –ù–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ —Å–æ–æ–±—â–∞—é—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
  –†–µ–≥—É–ª—è—Ç–æ—Ä –æ–±–µ—â–∞–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –º–µ—Ä—ã –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
  ...
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
python test_ml_integration.py
```

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã ML scorer —Å–µ—Ä–≤–∏—Å–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –∞–≥–µ–Ω—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∏ ML scores

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from src.agents.graphs import run_analysis

# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
results = run_analysis(time_window_hours=24, top_k=5)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
for result in results:
    print(f"Title: {result['headline']}")
    print(f"Traditional: {result['hotness']:.3f}")
    print(f"ML: {result['ml_hotness']:.3f}")
    print(f"Combined: {result['combined_hotness']:.3f}")
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã ML-–º–æ–¥–µ–ª–∏:

```
INFO: ML model loaded from /app/ml/hot_news_model/models/lenta_model.joblib
INFO: Calculated ML scores for 15 clusters
INFO: Selected 5 clusters for enrichment
INFO: Top cluster combined scores: [('uuid1', 0.723), ('uuid2', 0.654)]
```

### Fallback –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–ï—Å–ª–∏ ML-–º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:

```
WARNING: ML model not available, using fallback scoring
INFO: Using fallback scoring for articles
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **ML-–º–æ–¥–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç ~2-5 —Å–µ–∫—É–Ω–¥** –∫ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
- **Fallback scoring** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–±–æ—è—Ö –º–æ–¥–µ–ª–∏

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏

1. –û–±—É—á–∏—Ç–µ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å –≤ –ø–∞–ø–∫–µ `ml/hot_news_model/`
2. –û–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç—å –≤ `MLScorer.__init__()`
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤

–ò–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Å–∞ –≤ `rank_and_select_node()`:

```python
# –¢–µ–∫—É—â–∏–µ –≤–µ—Å–∞ (70% —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π, 30% ML)
combined_score = (traditional_score * 0.7) + (ml_score * 0.3)
```

## Troubleshooting

### –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ –º–æ–¥–µ–ª–∏:
   ```bash
   ls -la ml/hot_news_model/models/
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É –º–æ–¥–µ–ª–∏

3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ `sys.path` –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é

ML-–º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ML-–º–æ–¥–µ–ª–∏ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π, –¥–µ–ª–∞—è —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –∫ –Ω–æ–≤—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –≤ –¥–∞–Ω–Ω—ã—Ö.
